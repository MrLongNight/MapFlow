<?xml version='1.0' encoding='windows-1252'?>
<Wix xmlns='http://schemas.microsoft.com/wix/2006/wi'>
    <Product Id='*' Name='MapFlow' UpgradeCode='0392650E-1608-4122-8232-024564879201' Manufacturer='MapFlow Contributors' Language='1033' Codepage='1252' Version='0.1.0'>
        <Package Id='*' Keywords='Installer' Description='MapFlow - Open Source VJ Projection Mapping Software' Manufacturer='MapFlow Contributors' InstallerVersion='450' Languages='1033' Compressed='yes' InstallScope='perMachine' SummaryCodepage='1252' Platform='x64'/>
        <MajorUpgrade Schedule='afterInstallInitialize' DowngradeErrorMessage='A newer version of [ProductName] is already installed. Setup will now exit.' />
        <Media Id='1' Cabinet='media1.cab' EmbedCab='yes' DiskPrompt='CD-ROM #1' />
        <Property Id='DiskPrompt' Value='MapFlow Installation [1]' />
        <Directory Id='TARGETDIR' Name='SourceDir'>
            <Directory Id='ProgramFiles64Folder'>
                <Directory Id='INSTALLFOLDER' Name='MapFlow'>
                    <Component Id='MainExecutable' Guid='*'>
                        <File Id='MapFlowEXE' Name='MapFlow.exe' Source='$(var.CargoTargetBinDir)\MapFlow.exe' KeyPath='yes'>
                            <Shortcut Id='startmenuMapFlow' Directory='ProgramMenuDir' Name='MapFlow' WorkingDirectory='INSTALLFOLDER' Icon='MapFlowIcon.exe' IconIndex='0' Advertise='yes' />
                            <Shortcut Id='desktopMapFlow' Directory='DesktopFolder' Name='MapFlow' WorkingDirectory='INSTALLFOLDER' Icon='MapFlowIcon.exe' IconIndex='0' Advertise='yes' />
                        </File>
                    </Component>
                     <Component Id='AvCodec' Guid='*'> <File Id='dll_avcodec' Name='avcodec-60.dll' Source='$(var.CargoTargetBinDir)\avcodec-60.dll' /> </Component>
                     <Component Id='AvDevice' Guid='*'> <File Id='dll_avdevice' Name='avdevice-60.dll' Source='$(var.CargoTargetBinDir)\avdevice-60.dll' /> </Component>
                     <Component Id='AvFilter' Guid='*'> <File Id='dll_avfilter' Name='avfilter-9.dll' Source='$(var.CargoTargetBinDir)\avfilter-9.dll' /> </Component>
                     <Component Id='AvFormat' Guid='*'> <File Id='dll_avformat' Name='avformat-60.dll' Source='$(var.CargoTargetBinDir)\avformat-60.dll' /> </Component>
                     <Component Id='AvUtil' Guid='*'> <File Id='dll_avutil' Name='avutil-58.dll' Source='$(var.CargoTargetBinDir)\avutil-58.dll' /> </Component>
                     <Component Id='SwResample' Guid='*'> <File Id='dll_swresample' Name='swresample-4.dll' Source='$(var.CargoTargetBinDir)\swresample-4.dll' /> </Component>
                     <Component Id='SwScale' Guid='*'> <File Id='dll_swscale' Name='swscale-7.dll' Source='$(var.CargoTargetBinDir)\swscale-7.dll' /> </Component>
                </Directory>
            </Directory>
            <Directory Id="ProgramMenuFolder" Name="Programs">
                <Directory Id="ProgramMenuDir" Name="MapFlow" />
            </Directory>
            <Directory Id="DesktopFolder" Name="Desktop" />
        </Directory>
        <Feature Id='Complete' Level='1'>
            <ComponentRef Id='MainExecutable' />
            <ComponentRef Id='AvCodec' />
            <ComponentRef Id='AvDevice' />
            <ComponentRef Id='AvFilter' />
            <ComponentRef Id='AvFormat' />
            <ComponentRef Id='AvUtil' />
            <ComponentRef Id='SwResample' />
            <ComponentRef Id='SwScale' />
            <ComponentRef Id='ProgramMenuDir' />
        </Feature>
        <Component Id="ProgramMenuDir" Directory="ProgramMenuDir" Guid="*">
            <RemoveFolder Id='ProgramMenuDir' On='uninstall' />
            <RegistryValue Root='HKCU' Key='Software\[Manufacturer]\[ProductName]' Type='string' Value='' KeyPath='yes' />
        </Component>
        <Icon Id="MapFlowIcon.exe" SourceFile="../../../resources/app_icons/mapmap.ico" />
        <Property Id="ARPPRODUCTICON" Value="MapFlowIcon.exe" />
        <UI>
            <UIRef Id="WixUI_InstallDir" />
            <Publish Dialog="WelcomeDlg" Control="Next" Event="NewDialog" Value="InstallDirDlg" Order="2">1</Publish>
            <Publish Dialog="InstallDirDlg" Control="Back" Event="NewDialog" Value="WelcomeDlg" Order="2">1</Publish>
        </UI>
        <Property Id="WIXUI_INSTALLDIR" Value="INSTALLFOLDER" />
        <WixVariable Id="WixUIBannerBmp" Value="../../../resources/branding/master_1024.png" />
        <WixVariable Id="WixUIDialogBmp" Value="../../../resources/branding/master_1024.png" />
        <WixVariable Id="WixUILicenseRtf" Value="wix/License.rtf" />
    </Product>
</Wix>
